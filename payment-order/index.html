<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>××—×©×‘×•×Ÿ ×¦×• ×ª×©×œ×•××™× - YE Professional 2026</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --primary: #1e293b; --secondary: #0f172a; --inner-bg: #1e293b;
            --panel: #334155; --text: #ffffff; --label: #cbd5e1;
            --border: #475569; --accent: #38bdf8; --danger: #fb7185; --success: #34d399;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Heebo', sans-serif; background: #1a2233; 
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; overflow-x: hidden; color: white;
        }

        .main-container {
            width: 1100px; background: var(--inner-bg); padding: 20px 30px;
            border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.4); margin: 20px auto;
            position: relative;
        }

        /* ×¡×¨×’×œ ×›×œ×™× - ××™×¤×•×¡ ××©×××œ */
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .top-controls { display: flex; gap: 8px; flex-direction: row-reverse; } /* ×”×•×¤×š ×¡×“×¨ ×œ×”×‘×™× ××™×¤×•×¡ ×œ×©×××œ */
        
        .date-tag { background: rgba(56, 189, 248, 0.15); color: var(--accent); padding: 5px 15px; border-radius: 8px; font-weight: 700; border: 1px solid var(--accent); font-size: 0.9rem; }
        .btn-ctrl { background: var(--panel); border: 1px solid var(--border); color: #fff; padding: 6px 14px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 5px; }
        .btn-ctrl:hover { border-color: var(--accent); background: var(--secondary); }

        header { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 12px; margin-bottom: 15px; border: 1px solid var(--border); text-align: center; }
        header h1 { margin: 0; font-size: 1.5rem; font-weight: 700; color: #fff; }

        /* ×œ×•×— ×¨××©×™ - 2 ×¢××•×“×•×ª */
        .board { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
        .inputs-col, .results-col { background: var(--panel); border: 1px solid var(--border); border-radius: 18px; padding: 20px; }

        .section-title { display: flex; align-items: center; justify-content: center; margin-bottom: 15px; color: #fff; font-size: 1.1rem; font-weight: 700; border-bottom: 1px solid var(--border); padding-bottom: 8px; }

        .input-group { display: flex; flex-direction: column; margin-bottom: 12px; align-items: center; width: 100%; }
        .input-group label { font-size: 0.95rem; font-weight: 600; color: var(--label); margin-bottom: 8px; }

        input { padding: 12px; border: 1.5px solid var(--border); border-radius: 12px; background: var(--secondary); color: #ffffff !important; font-size: 1.1rem; font-weight: 600; text-align: center; width: 100%; }
        .amt-input { color: var(--accent) !important; font-size: 1.25rem; }

        .chip { padding: 10px; border: 1.5px solid var(--border); border-radius: 12px; background: var(--secondary); cursor: pointer; color: #fff; font-weight: 600; font-size: 0.9rem; flex: 1; min-height: 52px; display: flex; align-items: center; justify-content: center; text-align: center; transition: 0.2s; }
        .chip.active { background: var(--accent); color: var(--secondary); border-color: var(--accent); }

        .category-btn-group { display: flex; gap: 10px; margin-top: 20px; width: 100%; }
        
        /* ×ª×•×¦××•×ª */
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; } 
        .result-card { background: var(--secondary); border: 1px solid var(--border); border-radius: 18px; padding: 16px; text-align: center; }
        .result-card .k { color: var(--label); font-size: 0.9rem; margin-bottom: 5px; }
        .result-card .v { font-size: 1.4rem; font-weight: 800; color: #ffffff !important; }
        
        .ratio-bar-container { width: 100%; height: 20px; background: #475569; border-radius: 10px; margin: 15px 0; overflow: hidden; display: flex; }
        .bar-d { background: var(--accent); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #000; font-weight: 900; }
        .bar-p { background: var(--success); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #000; font-weight: 900; }

        .final-pay-card { grid-column: 1 / -1; border: 2px solid var(--accent); background: rgba(56, 189, 248, 0.05); }
        .final-pay-card .v { font-size: 2.2rem; color: var(--danger) !important; }

        .insight-box { width: 100%; background: rgba(56, 189, 248, 0.1); border-radius: 15px; padding: 20px; margin-top: 20px; border-right: 6px solid var(--accent); font-size: 0.95rem; line-height: 1.6; }

        footer { margin-top: 30px; text-align: center; border-top: 1px solid var(--border); padding-top: 15px; font-size: 0.9rem; color: var(--label); }

        /* × ×™×•×•×˜ ××•×‘×™×™×œ ××¨×—×£ */
        .mobile-nav-floating { display: none; position: fixed; bottom: 25px; left: 0; right: 0; padding: 0 20px; justify-content: space-between; z-index: 1000; gap: 15px; }
        .nav-btn-float { flex: 1; padding: 16px; border-radius: 15px; border: none; font-weight: 800; font-size: 1.1rem; cursor: pointer; box-shadow: 0 10px 25px rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-prev { background: var(--panel); color: white; }
        .btn-next { background: var(--accent); color: var(--secondary); }

        /* ×›×¤×ª×•×¨ ×—×©×‘ ×›×¢×ª ××•×‘×™×™×œ */
        .mobile-calc-btn { display: none; width: 100%; padding: 18px; background: var(--success); color: var(--secondary); border: none; border-radius: 15px; font-size: 1.3rem; font-weight: 900; margin-top: 20px; cursor: pointer; box-shadow: 0 8px 20px rgba(52, 211, 153, 0.3); }

        @media screen and (max-width: 768px) {
            .main-container { width: 100%; padding: 15px; margin: 0; border-radius: 0; }
            .board { display: block; }
            .step-content { display: none; }
            .step-content.active { display: block; }
            .inputs-col, .results-col { background: transparent; border: none; padding: 10px 0; }
            .mobile-nav-floating { display: flex; }
            .mobile-calc-btn { display: block; }
            .top-bar .date-tag { display: none; }
            .category-btn-group { flex-direction: column; }
            .result-grid { grid-template-columns: 1fr; }
            .chip { font-size: 0.85rem; min-height: 60px; }
        }
    </style>
</head>
<body>

<div class="main-container" id="calcRoot">
    <div class="top-bar">
        <div class="date-tag">12.1.2026</div>
        <div class="top-controls">
            <button class="btn-ctrl" style="color:var(--danger)" onclick="resetData()">××™×¤×•×¡ âœ–</button>
            <button class="btn-ctrl" onclick="restoreFromStorage()">×©×—×–×•×¨ â†º</button>
            <button class="btn-ctrl" id="btnShot">×¦×™×œ×•× ğŸ“¸</button>
            <button class="btn-ctrl" onclick="window.print()">×”×“×¤×¡×”/PDF ğŸ–¨ï¸</button>
        </div>
    </div>

    <header><h1>××—×©×‘×•×Ÿ ×¦×• ×ª×©×œ×•××™×</h1></header>

    <div class="board">
        <div id="step1" class="step-content active">
            <div class="inputs-col">
                <div class="section-title">ğŸ‘¤ × ×ª×•× ×™ ×‘×¡×™×¡ ×•×”×›× ×¡×•×ª</div>
                
                <div class="input-group">
                    <label>××¦×‘ ××©×¤×—×ª×™</label>
                    <div style="display:flex; gap:8px; width:100%;">
                        <button class="chip family-btn active" data-val="×™×—×™×“">×™×—×™×“ (× ×©×•×™ ×’×¨ ×‘× ×¤×¨×“)</button>
                        <button class="chip family-btn" data-val="×–×•×’">×–×•×’</button>
                        <button class="chip family-btn" data-val="×¨×•×•×§">×¨×•×•×§/×’×¨×•×©/××œ××Ÿ</button>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="input-group">
                        <label>×™×œ×“×™× (×¢×“ 18)</label>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <button class="chip" style="min-height:45px; flex:none; width:45px;" onclick="changeKids(-1)">-</button>
                            <input id="childrenCount" type="number" value="0" min="0" style="width: 60px;">
                            <button class="chip" style="min-height:45px; flex:none; width:45px;" onclick="changeKids(1)">+</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>××™ ×‘×”×œ×™×š?</label>
                        <div style="display:flex; gap:8px; width:100%;">
                            <button class="chip gender-btn active" data-val="×—×™×™×‘">×—×™×™×‘</button>
                            <button class="chip gender-btn" data-val="×—×™×™×‘×ª">×—×™×™×‘×ª</button>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                    <div class="input-group"><label>×”×›× ×¡×” ×—×™×™×‘/×ª</label><input id="salD" type="text" class="amt-input live-curr" placeholder="0"></div>
                    <div class="input-group"><label>×”×›× ×¡×” ×‘×Ÿ ×–×•×’</label><input id="salP" type="text" class="amt-input live-curr" placeholder="0"></div>
                </div>

                <div class="pc-only-additions">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                        <div class="input-group"><label>×”×›× ×¡×” × ×•×¡×¤×ª (×—×™×™×‘)</label><input id="addD" type="text" class="amt-input live-curr" placeholder="0"></div>
                        <div class="input-group"><label>×”×›× ×¡×” × ×•×¡×¤×ª (×‘×Ÿ ×–×•×’)</label><input id="addP" type="text" class="amt-input live-curr" placeholder="0"></div>
                    </div>
                    <div class="category-btn-group" id="catGroup">
                        <button class="chip" onclick="alert('×”×•×¡×£ ×§×¦×‘×”')">×§×¦×‘××•×ª â•</button>
                        <button class="chip" onclick="alert('×”×•×¡×£ ×”×•×¦××”')">×”×•×¦××•×ª â•</button>
                        <button class="chip" onclick="alert('×”×•×¡×£ ××–×•× ×•×ª')">××–×•× ×•×ª â•</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="step2" class="step-content">
            <div class="inputs-col">
                <div class="section-title">â• ×ª×•×¡×¤×•×ª ×•×”×•×¦××•×ª</div>
                <div id="mobileAdditionsGoHere"></div> <button class="mobile-calc-btn" onclick="changeStep(1)">×—×©×‘ ×›×¢×ª ğŸ“Š</button>
            </div>
        </div>

        <div id="step3" class="step-content pc-visible">
            <div class="results-col">
                <div class="section-title">ğŸ“Š ×ª×•×¦××•×ª ×•×—×™×©×•×‘</div>
                <div class="result-grid">
                    <div class="result-card"><div class="k">×¡×”"×› ×”×›× ×¡×•×ª</div><div id="resIncome" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×§×¦×‘×ª ×™×œ×“×™×</div><div id="resKidsSS" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×“××™ ××—×™×”</div><div id="resBase" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×¡×”"×› ×”×•×¦××•×ª</div><div id="resExp" class="v">0 â‚ª</div></div>
                    
                    <div class="result-card final-pay-card">
                        <div class="k">×ª×©×œ×•× ×—×•×“×©×™ ××•×¦×¢</div>
                        <div id="resFinalPay" class="v">0 â‚ª</div>
                    </div>

                    <div class="result-card" style="grid-column: 1 / -1;">
                        <div class="k">×™×—×¡ ×”×›× ×¡×•×ª ×—×œ×•×§×ª × ×˜×œ</div>
                        <div class="ratio-bar-container"><div id="barD" class="bar-d" style="width: 50%;">50%</div><div id="barP" class="bar-p" style="width: 50%;">50%</div></div>
                        <div style="display:flex; justify-content:space-between; font-size:0.85rem; font-weight:700;">
                            <span id="txtRatioD">×—×™×™×‘: 0%</span>
                            <span id="txtRatioP">×‘×Ÿ ×–×•×’: 0%</span>
                        </div>
                    </div>
                </div>
                <div id="insightBox" class="insight-box">×”×–×Ÿ × ×ª×•× ×™ ×”×›× ×¡×” ×›×“×™ ×œ×§×‘×œ ×ª×•×‘× ×•×ª ××”××¢×¨×›×ª...</div>
            </div>
        </div>
    </div>

    <div class="mobile-nav-floating">
        <button class="nav-btn-float btn-prev" onclick="changeStep(-1)">â” ×”×§×•×“×</button>
        <button class="nav-btn-float btn-next" onclick="changeStep(1)">×”×‘× â¬…</button>
    </div>

    <footer>YE - ×¤×ª×¨×•× ×•×ª ×—×›××™× ×œ× ×™×”×•×œ ×”×œ×™×›×™ ×—×“×œ×•×ª ×¤×™×¨×¢×•×Ÿ &copy; 2026</footer>
</div>

<script>
    const E = id => document.getElementById(id);
    const parseVal = s => parseInt(String(s || '').replace(/[^\d]/g, '')) || 0;
    const formatVal = n => new Intl.NumberFormat('he-IL').format(n) + (n > 0 ? ' â‚ª' : '');

    let currentStep = 1;

    // ×¤×•× ×§×¦×™×•×ª ×‘×¡×™×¡×™×•×ª
    function changeKids(n) {
        const input = E('childrenCount');
        input.value = Math.max(0, parseInt(input.value) + n);
        calc();
    }

    function changeStep(n) {
        if (window.innerWidth > 768) return;
        currentStep = Math.max(1, Math.min(3, currentStep + n));
        
        document.querySelectorAll('.step-content').forEach((s, i) => {
            s.classList.toggle('active', (i + 1) === currentStep);
        });

        // ×”×¡×ª×¨×ª ×›×¤×ª×•×¨×™ × ×™×•×•×˜ ×‘×©×œ×‘ ×”×ª×•×¦××•×ª ××• ×”×”×ª×—×œ×” ×× ×¨×•×¦×™×
        E('calcRoot').querySelector('.btn-prev').style.visibility = currentStep === 1 ? 'hidden' : 'visible';
        E('calcRoot').querySelector('.btn-next').style.display = currentStep === 3 ? 'none' : 'flex';
        
        window.scrollTo(0,0);
        if(currentStep === 3) calc();
    }

    // × ×™×”×•×œ ×›×¤×ª×•×¨×™ ×‘×—×™×¨×” (Chips)
    function setupChips(className) {
        document.querySelectorAll('.' + className).forEach(btn => {
            btn.onclick = () => {
                document.querySelectorAll('.' + className).forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                calc();
            };
        });
    }

    setupChips('family-btn');
    setupChips('gender-btn');

    // ×œ×•×’×™×§×ª ×—×™×©×•×‘
    function calc() {
        const dSal = parseVal(E('salD').value);
        const pSal = parseVal(E('salP').value);
        const total = dSal + pSal;
        
        E('resIncome').textContent = formatVal(total);
        
        // ×™×—×¡ ×”×›× ×¡×•×ª
        const ratioD = Math.round((dSal / (total || 1)) * 100);
        E('barD').style.width = ratioD + "%";
        E('barD').textContent = ratioD > 10 ? ratioD + "%" : "";
        E('barP').style.width = (100 - ratioD) + "%";
        E('barP').textContent = (100 - ratioD) > 10 ? (100 - ratioD) + "%" : "";
        
        E('txtRatioD').textContent = `×—×™×™×‘: ${ratioD}%`;
        E('txtRatioP').textContent = `×‘×Ÿ ×–×•×’: ${100 - ratioD}%`;

        const pay = Math.max(0, Math.floor((total - 5000) / 2));
        E('resFinalPay').textContent = formatVal(pay);
    }

    // ×¤×•×¨××˜ ×›×¡×£ ×‘×©×™×“×•×¨ ×—×™
    document.querySelectorAll('.live-curr').forEach(el => {
        el.addEventListener('input', e => {
            let v = parseVal(e.target.value);
            e.target.value = v > 0 ? formatVal(v) : '';
            calc();
        });
    });

    // ×”×ª×××ª ××‘× ×” ×œ××•×‘×™×™×œ ×‘×–××Ÿ ×˜×¢×™× ×”
    if (window.innerWidth <= 768) {
        const additions = document.querySelector('.pc-only-additions');
        E('mobileAdditionsGoHere').appendChild(additions);
    }

    function resetData() { if(confirm("×œ××¤×¡ ××ª ×›×œ ×”× ×ª×•× ×™×?")) location.reload(); }
    E('btnShot').onclick = () => { html2canvas(E('calcRoot'), { backgroundColor: '#1a2233' }).then(c => { const a = document.createElement('a'); a.download = 'calc.png'; a.href = c.toDataURL(); a.click(); }); };
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>××—×©×‘×•×Ÿ ×¦×• ×ª×©×œ×•××™× - YE Professional 2026</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --primary: #1e293b; --secondary: #0f172a; --inner-bg: #1e293b;
            --panel: #334155; --text: #ffffff; --label: #cbd5e1;
            --border: #475569; --accent: #38bdf8; --danger: #fb7185; --success: #34d399;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Heebo', sans-serif; background: #1a2233; 
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; overflow-x: hidden;
        }

        .main-container {
            width: 1100px; background: var(--inner-bg); padding: 20px 30px;
            border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.4); margin: 20px auto;
            position: relative;
        }

        /* ×¡×¨×’×œ ×¢×œ×™×•×Ÿ - ××—×©×‘ */
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .date-tag { background: rgba(56, 189, 248, 0.15); color: var(--accent); padding: 5px 15px; border-radius: 8px; font-weight: 700; border: 1px solid var(--accent); font-size: 0.9rem; }
        .top-controls { display: flex; gap: 6px; }
        .btn-ctrl { background: var(--panel); border: 1px solid var(--border); color: #fff; padding: 6px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: 0.2s; }

        header { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 12px; margin-bottom: 15px; border: 1px solid var(--border); }
        header h1 { margin: 0; font-size: 1.5rem; font-weight: 700; color: #fff; text-align: center; }

        /* ×œ×•×— ×¨××©×™ - 2 ×¢××•×“×•×ª ×‘××—×©×‘ */
        .board { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
        .inputs-col, .results-col { background: var(--panel); border: 1px solid var(--border); border-radius: 18px; padding: 20px; }

        .section-title { display: flex; align-items: center; justify-content: center; margin-bottom: 12px; color: #fff; font-size: 1.1rem; font-weight: 700; border-bottom: 1px solid var(--border); padding-bottom: 6px; }

        .input-group { display: flex; flex-direction: column; margin-bottom: 10px; align-items: center; width: 100%; }
        .input-group label { font-size: 0.95rem; font-weight: 600; color: var(--label); margin-bottom: 6px; text-align: center; width: 100%; }

        input, select, textarea { padding: 10px; border: 1.5px solid var(--border); border-radius: 12px; background: var(--secondary); color: #ffffff !important; font-size: 1.1rem; font-weight: 600; text-align: center; width: 100%; }
        .amt-input { color: var(--accent) !important; font-size: 1.25rem; width: 100% !important; }

        .chip { padding: 10px; border: 1.5px solid var(--border); border-radius: 12px; background: var(--secondary); cursor: pointer; color: #fff; font-weight: 600; font-size: 0.9rem; flex: 1; min-height: 52px; display: flex; align-items: center; justify-content: center; text-align: center; line-height: 1.2; }
        .chip.active { background: var(--accent); color: var(--secondary); border-color: var(--accent); }

        .category-btn-group { display: flex; gap: 8px; margin: 20px 0; width: 100%; }

        /* ×ª×•×¦××•×ª */
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; } 
        .result-card { background: var(--secondary); border: 1px solid var(--border); border-radius: 18px; padding: 16px; text-align: center; position: relative; }
        .result-card .k { color: var(--label); font-size: 0.9rem; margin-bottom: 5px; }
        .result-card .v { font-size: 1.35rem; font-weight: 800; color: #ffffff !important; }
        
        .ratio-bar-container { width: 100%; height: 18px; background: #475569; border-radius: 9px; margin: 12px 0; overflow: hidden; display: flex; }
        .bar-d { background: var(--accent); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #fff; font-weight: 900; }
        .bar-p { background: var(--success); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #fff; font-weight: 900; }

        .payment-box { border: 2px solid var(--accent) !important; grid-column: 1 / -1; }
        .payment-box .v { font-size: 2rem; color: var(--danger) !important; }

        .insight-box { width: 100%; background: rgba(56, 189, 248, 0.12); border-radius: 15px; padding: 20px; margin-top: 25px; border-right: 6px solid var(--accent); font-size: 0.95rem; color: #ffffff !important; line-height: 1.5; }

        footer { margin-top: 25px; text-align: center; border-top: 1px solid var(--border); padding-top: 15px; font-size: 1.1rem; color: var(--label); font-weight: 700; }

        /* ××œ×× ×˜×™× ××•×¡×ª×¨×™× ×‘××—×©×‘ (××™×•×¢×“×™× ×œ-Wizard ××•×‘×™×™×œ) */
        .mobile-only { display: none; }

        /* ============================================================
           ×”×’×“×¨×•×ª ××•×‘×™×™×œ ×‘×œ×‘×“
           ============================================================ */
        @media screen and (max-width: 768px) {
            .main-container { width: 100%; padding: 15px; border-radius: 0; margin: 0; }
            .board { display: block; } /* ×‘×™×˜×•×œ ×”×’×¨×™×“ ×”×“×•-×¢××•×“×ª×™ */
            
            .top-bar .date-tag { display: none; }
            .top-controls { width: 100%; justify-content: space-between; }
            #btnRestore { display: none; }

            .mobile-only { display: flex; }
            .mobile-progress { width: 100%; height: 6px; background: var(--border); border-radius: 10px; margin: 10px 0; overflow: hidden; }
            .progress-fill { height: 100%; background: var(--accent); width: 33%; transition: 0.3s; }
            .mobile-nav { justify-content: space-between; align-items: center; margin-bottom: 15px; }

            /* Wizard Logic */
            .step-content { display: none; }
            .step-content.active { display: block; }
            
            #mobileCalcBtn { display: block; width: 100%; padding: 15px; background: var(--accent); color: var(--secondary); border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 800; margin-top: 15px; }

            .inputs-col, .results-col { background: transparent; border: none; padding: 0; }
            .category-btn-group { flex-wrap: wrap; }
            .category-btn-group .chip { min-height: 60px; }
            .result-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="main-container" id="calcRoot">
    <div class="top-bar">
        <div id="dateTag" class="date-tag">12.1.2026</div>
        <div class="top-controls">
            <button class="btn-ctrl" onclick="resetData()" style="color:var(--danger)">××™×¤×•×¡ âœ–</button>
            <button class="btn-ctrl" id="btnRestore" onclick="restoreFromStorage()">×©×—×–×•×¨ â†º</button>
            <button class="btn-ctrl" id="btnShot">×¦×™×œ×•× ğŸ“¸</button>
            <button class="btn-ctrl" onclick="window.print()">×”×“×¤×¡×”/PDF ğŸ–¨ï¸</button>
        </div>
    </div>

    <div class="mobile-only mobile-progress"><div class="progress-fill" id="progressFill"></div></div>
    <div class="mobile-only mobile-nav">
        <button class="btn-ctrl" onclick="changeStep(-1)">â” ×”×§×•×“×</button>
        <div style="color:var(--accent); font-weight:bold;">12.1.2026</div>
        <button class="btn-ctrl" onclick="changeStep(1)">×”×‘× â¬…</button>
    </div>

    <header><h1>××—×©×‘×•×Ÿ ×¦×• ×ª×©×œ×•××™×</h1></header>

    <div class="board">
        <div id="mobileStep1" class="step-content active">
            <div class="inputs-col">
                <div class="section-title">ğŸ‘¤ × ×ª×•× ×™ ×‘×¡×™×¡ ×•×”×›× ×¡×”</div>
                
                <div class="input-group">
                    <label>××¦×‘ ××©×¤×—×ª×™</label>
                    <div style="display:flex; gap:8px; width:100%;">
                        <button class="chip family-type active" data-type="×™×—×™×“">×™×—×™×“ (× ×©×•×™ ×’×¨ ×‘× ×¤×¨×“)</button>
                        <button class="chip family-type" data-type="×–×•×’">×–×•×’</button>
                        <button class="chip family-type" data-type="×¨×•×•×§">×¨×•×•×§/×’×¨×•×©/××œ××Ÿ</button>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <div class="input-group">
                        <label>×™×œ×“×™× (×¢×“ 18)</label>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <input id="childrenCount" type="number" value="0" min="0" oninput="calc()" style="width: 60px;">
                            <button class="chip" style="min-height:40px;" onclick="changeKids(1)">+</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>××™ ×‘×”×œ×™×š?</label>
                        <div style="display:flex; gap:8px; width:100%;">
                            <button class="chip gender-btn active">×—×™×™×‘</button>
                            <button class="chip gender-btn">×—×™×™×‘×ª</button>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                    <div class="input-group"><label>×”×›× ×¡×” ×—×™×™×‘/×ª</label><input id="salD" type="text" class="amt-input live-curr" placeholder="0"></div>
                    <div class="input-group"><label>×”×›× ×¡×” ×‘×Ÿ ×–×•×’</label><input id="salP" type="text" class="amt-input live-curr" placeholder="0"></div>
                </div>

                <div id="mobileStep2" class="step-content-pc">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div class="input-group"><label>×”×›× ×¡×” × ×•×¡×¤×ª (×—×™×™×‘)</label><input id="addD" type="text" class="amt-input live-curr" placeholder="0"></div>
                        <div class="input-group"><label>×”×›× ×¡×” × ×•×¡×¤×ª (×–×•×’)</label><input id="addP" type="text" class="amt-input live-curr" placeholder="0"></div>
                    </div>
                    <div class="category-btn-group">
                        <button class="chip" onclick="toggleEntry('allowance')">×§×¦×‘××•×ª â•</button>
                        <button class="chip" onclick="toggleEntry('special')">×”×•×¦××•×ª â•</button>
                        <button class="chip" onclick="toggleEntry('alimony')">××–×•× ×•×ª â•</button>
                    </div>
                    <button id="mobileCalcBtn" class="mobile-only" onclick="changeStep(1)">×—×©×‘ ×ª×•×¦××•×ª ğŸ“Š</button>
                </div>
            </div>
        </div>

        <div id="mobileStep3" class="step-content step-content-pc">
            <div class="results-col">
                <div class="section-title">ğŸ“Š ×ª×•×¦××•×ª</div>
                <div class="result-grid">
                    <div class="result-card"><div class="k">×¡×”"×› ×”×›× ×¡×•×ª</div><div id="resIncome" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×§×¦×‘×ª ×™×œ×“×™×</div><div id="resKidsSS" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×“××™ ××—×™×”</div><div id="resBase" class="v">0 â‚ª</div></div>
                    <div class="result-card"><div class="k">×¡×”"×› ×”×•×¦××•×ª</div><div id="resExp" class="v">0 â‚ª</div></div>
                    
                    <div class="result-card payment-box">
                        <div class="k">×ª×©×œ×•× ×—×•×“×©×™ ××•×¦×¢</div>
                        <div id="resFinalPay" class="v">0 â‚ª</div>
                    </div>

                    <div class="result-card" style="grid-column: 1 / -1;">
                        <div class="k">×™×—×¡ ×”×›× ×¡×•×ª ×—×œ×•×§×ª × ×˜×œ</div>
                        <div class="ratio-bar-container"><div id="barD" class="bar-d" style="width: 50%;">50%</div><div id="barP" class="bar-p" style="width: 50%;">50%</div></div>
                        <div style="display:flex; justify-content:space-between; font-size:0.8rem; font-weight:bold;"><span>×—×™×™×‘: 0%</span><span>×‘×Ÿ ×–×•×’: 0%</span></div>
                    </div>
                </div>
                <div id="insightBox" class="insight-box">×ª×•×‘× ×•×ª ×™×•×¤×™×¢×• ×›××Ÿ ×œ××—×¨ ×”×–× ×ª × ×ª×•× ×™×...</div>
            </div>
        </div>
    </div>

    <footer>YE - ×¤×ª×¨×•× ×•×ª ×—×›××™× ×œ× ×™×”×•×œ ×”×œ×™×›×™ ×—×“×œ×•×ª ×¤×™×¨×¢×•×Ÿ &copy; 2026</footer>
</div>

<script>
    let currentStep = 1;

    function changeStep(n) {
        if (window.innerWidth > 768) return;
        currentStep = Math.max(1, Math.min(3, currentStep + n));
        
        document.getElementById('mobileStep1').classList.toggle('active', currentStep === 1);
        document.getElementById('mobileStep2').parentElement.classList.toggle('active', currentStep === 2);
        document.getElementById('mobileStep3').classList.toggle('active', currentStep === 3);
        
        document.getElementById('progressFill').style.width = (currentStep * 33.33) + "%";
        window.scrollTo(0,0);
    }

    // ×¤×•× ×§×¦×™×•×ª ×‘×¡×™×¡×™×•×ª (×¤×•×¨××˜, ×—×™×©×•×‘ ×•×›×•')
    const parseVal = s => parseInt(String(s || '').replace(/[^\d]/g, '')) || 0;
    const formatVal = n => new Intl.NumberFormat('he-IL').format(n) + (n > 0 ? ' â‚ª' : '');

    function calc() {
        // ×œ×•×’×™×§×ª ×—×™×©×•×‘ ×‘×¡×™×¡×™×ª ×œ×¦×•×¨×š ×”×ª×¦×•×’×”
        const dSal = parseVal(document.getElementById('salD').value);
        const pSal = parseVal(document.getElementById('salP').value);
        const total = dSal + pSal;
        document.getElementById('resIncome').textContent = formatVal(total);
        document.getElementById('resFinalPay').textContent = formatVal(Math.max(0, (total - 5000) / 2));
    }

    document.querySelectorAll('.live-curr').forEach(el => {
        el.addEventListener('input', e => {
            let raw = parseVal(e.target.value);
            e.target.value = raw > 0 ? formatVal(raw) : '';
            calc();
        });
    });

    function resetData() { if(confirm("×œ××¤×¡ ××ª ×›×œ ×”× ×ª×•× ×™×?")) location.reload(); }
</script>

</body>
</html>
